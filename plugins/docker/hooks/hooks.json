{
  "$schema": "https://cursor.com/schemas/hooks.json",
  "hooks": [
    {
      "name": "dockerfile-lint",
      "description": "Lint Dockerfiles using hadolint before committing",
      "event": "pre-commit",
      "match": {
        "files": ["Dockerfile*", "**/*.dockerfile", "**/Dockerfile*"]
      },
      "command": {
        "run": "bash ./scripts/docker-lint.sh lint-dockerfile ${files}",
        "timeout": 30000
      },
      "severity": "warning",
      "enabled": true
    },
    {
      "name": "compose-validate",
      "description": "Validate Docker Compose files for syntax and schema correctness",
      "event": "pre-commit",
      "match": {
        "files": [
          "docker-compose*.yml",
          "docker-compose*.yaml",
          "compose*.yml",
          "compose*.yaml"
        ]
      },
      "command": {
        "run": "bash ./scripts/docker-lint.sh lint-compose ${files}",
        "timeout": 30000
      },
      "severity": "warning",
      "enabled": true
    },
    {
      "name": "dockerignore-check",
      "description": "Verify .dockerignore exists when Dockerfiles are present",
      "event": "pre-commit",
      "match": {
        "files": ["Dockerfile*", "**/*.dockerfile"]
      },
      "command": {
        "run": "bash ./scripts/docker-lint.sh check-dockerignore",
        "timeout": 10000
      },
      "severity": "info",
      "enabled": true
    },
    {
      "name": "no-latest-tag",
      "description": "Check that no Docker images use the :latest tag",
      "event": "pre-commit",
      "match": {
        "files": [
          "Dockerfile*",
          "**/*.dockerfile",
          "docker-compose*.yml",
          "docker-compose*.yaml",
          "compose*.yml",
          "compose*.yaml"
        ]
      },
      "command": {
        "run": "bash ./scripts/docker-lint.sh check-no-latest ${files}",
        "timeout": 10000
      },
      "severity": "warning",
      "enabled": true
    },
    {
      "name": "security-scan",
      "description": "Run vulnerability scan on built Docker images",
      "event": "post-build",
      "match": {
        "files": ["Dockerfile*", "**/*.dockerfile"]
      },
      "command": {
        "run": "bash ./scripts/docker-lint.sh security-scan",
        "timeout": 120000
      },
      "severity": "error",
      "enabled": false
    }
  ]
}
